Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-1


       1				.286 
       2 0000				code segment public 
       3				    assume cs:code, ds:donnees, ss:pile
					 
       4				 
       5				; =====================================
					======================== 
       6				; Declaration des symboles externes de 
					LIBGFX 
       7				; =====================================
					======================== 
       8				extrn VideoVGA:proc 
       9				extrn VideoCMD:proc 
      10				extrn ClearScreen:proc 
      11				extrn PeekKey:proc 
      12				extrn sleep:proc 
      13				extrn fillRect:proc 
      14				extrn CharLine:proc 
      15				 
      16				extrn userinput:byte 
      17				extrn col:byte 
      18				extrn Rx:word 
      19				extrn Ry:word 
      20				extrn Rw:word 
      21				extrn Rh:word 
      22				extrn tempo:word 
      23				 
      24				; =====================================
					======================== 
      25				; Segment de PILE 
      26				; =====================================
					======================== 
      27 0000				pile segment stack 
      28 0000  0100[			    dw 100h dup(?) 
      29	   ????			
      30			 ]	
      31				
      32 0200				pile ends 
      33				 
      34				; =====================================
					======================== 
      35				; Segment de DONNEES 
      36				; =====================================
					======================== 
      37 0000				donnees segment public 
      38				    ; ============ CONSTANTES =========
					=== 
      39 = 0280				    SCREEN_WIDTH    equ 640 
      40 = 01E0				    SCREEN_HEIGHT   equ 480 
      41 = 0032				    BRICK_WIDTH     equ 50 
      42 = 0014				    BRICK_HEIGHT    equ 20 
      43 = 0005				    BRICK_PADDING   equ 5 
      44 = 0005				    BRICK_ROWS      equ 5 
      45 = 000A				    BRICK_COLS      equ 10 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-2


      46				     
      47 = 0000				    COLOR_BG        equ 0      ; Noir 
      48 = 0050				    PADDLE_WIDTH    equ 80 
      49 = 000A				    PADDLE_HEIGHT   equ 10 
      50 = 01C2				    PADDLE_Y        equ 450 
      51 = 0014				    PADDLE_SPEED    equ 20 
      52 = 0009				    PADDLE_COLOR    equ 9      ; Bleu c
					lair 
      53 = 000F				    TEXT_COLOR      equ 15     ; Blanc 
      54				     
      55 = 0006				    BALL_SIZE       equ 6 
      56 = 000E				    BALL_COLOR      equ 14     ; Jaune 
      57				     
      58				    ; ============ VARIABLES JEU ======
					====== 
      59 0000  04 01 06 02 0E 0E 02	    brick_map       db 4, 1, 6, 2, 14, 
					14, 2, 6, 1, 4 
      60       06 01 04			
      61 000A  04 00 06 00 0E 0E 00	                    db 4, 0, 6, 0, 14, 
					14, 0, 6, 0, 4 
      62       06 00 04			
      63 0014  04 01 06 02 0E 0E 02	                    db 4, 1, 6, 2, 14, 
					14, 2, 6, 1, 4 
      64       06 01 04			
      65 001E  00 01 06 00 00 00 00	                    db 0, 1, 6, 0, 0, 0
					, 0, 6, 1, 0 
      66       06 01 00			
      67 0028  04 01 06 02 0E 0E 02	                    db 4, 1, 6, 2, 14, 
					14, 2, 6, 1, 4 
      68       06 01 04			
      69				 
      70 0032  0118			    paddle_x        dw 280 
      71				     
      72 0034  0140			    ball_x          dw 320 
      73 0036  0190			    ball_y          dw 400 
      74 0038  0004			    ball_vx         dw 4 
      75 003A  FFFC			    ball_vy         dw -4 
      76				     
      77				    ; Variable locale pour calculs 
      78 003C  0000			    loc_x           dw 0 
      79 003E  0000			    loc_y           dw 0 
      80 0040  00			    loc_col         db 0 
      81				     
      82 0041  45 53 43 3A 20 51 75	    msg_quit        db "ESC: Quitter$" 
					; Termine par $ pour DOS si besoin, mai
					s on utilise libgfx 
      83       69 74 74 65 72 24	
      84				 
      85 004E				donnees ends 
      86				 
      87				; =====================================
					======================== 
      88				; Segment de CODE 
      89				; =====================================
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-3


					======================== 
      90				 
      91 0000				MAIN PROC 
      92				    ; Initialisation du segment de donn
					ees 
      93 0000  B8 ---- R		    mov ax, donnees 
      94 0003  8E D8			    mov ds, ax 
      95				 
      96				    ; Initialisation Video via LIBGFX (
					VGA 640x480) 
      97 0005  E8 0000 E		    call VideoVGA 
      98				 
      99				    ; Initialisation jeu 
     100 0008  E8 0340 R		    call draw_ui 
     101 000B  E8 01E8 R		    call render_bricks 
     102 000E  E8 02F0 R		    call draw_paddle 
     103 0011  E8 017F R		    call draw_ball 
     104				 
     105 0014				game_loop: 
     106 0014  2E: C7 06 0000 E 000A	    mov tempo, 10 ; Vitesse du jeu 
     107 001B  E8 0000 E		    call sleep 
     108				     
     109 001E  E8 0159 R		    call move_ball 
     110 0021  E8 0000 E		    call PeekKey 
     111				     
     112 0024  2E: 80 3E 0000 E 1B	    cmp userinput, 27          ; Echap 
     113 002A  74 4E			    je exit_game 
     114				 
     115 002C  2E: 80 3E 0000 E 71	    cmp userinput, 'q'         ; 'q' (g
					auche) 
     116 0032  74 12			    je move_left 
     117 0034  2E: 80 3E 0000 E 61	    cmp userinput, 'a'         ; 'a' (g
					auche azerty) 
     118 003A  74 0A			    je move_left 
     119				     
     120 003C  2E: 80 3E 0000 E 64	    cmp userinput, 'd'         ; 'd' (d
					roite) 
     121 0042  74 16			    je move_right 
     122				 
     123 0044  EB CE			    jmp game_loop 
     124				 
     125 0046				move_left: 
     126 0046  E8 0318 R		    call clear_paddle 
     127 0049  A1 0032 R		    mov ax, paddle_x 
     128 004C  2D 0014			    sub ax, PADDLE_SPEED 
     129 004F  3D 0000			    cmp ax, 0 
     130 0052  7D 03			    jge update_paddle_l 
     131 0054  B8 0000			    mov ax, 0           ; Limite gauche
					 
     132 0057				update_paddle_l: 
     133 0057  EB 19 90			    jmp update_paddle_common 
     134				 
     135 005A				move_right: 
     136 005A  E8 0318 R		    call clear_paddle 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-4


     137 005D  A1 0032 R		    mov ax, paddle_x 
     138 0060  05 0014			    add ax, PADDLE_SPEED 
     139 0063  BB 0280			    mov bx, SCREEN_WIDTH 
     140 0066  83 EB 50			    sub bx, PADDLE_WIDTH 
     141 0069  3B C3			    cmp ax, bx 
     142 006B  7E 02			    jle update_paddle_r 
     143 006D  8B C3			    mov ax, bx          ; Limite droite
					 
     144 006F				update_paddle_r: 
     145 006F  EB 01 90			    jmp update_paddle_common 
     146				 
     147 0072				update_paddle_common: 
     148 0072  A3 0032 R		    mov paddle_x, ax 
     149 0075  E8 02F0 R		    call draw_paddle 
     150 0078  EB 9A			    jmp game_loop 
     151				 
     152 007A				exit_game: 
     153 007A  E8 0000 E		    call VideoCMD 
     154				 
     155				    ; Quitter vers le DOS 
     156 007D  B4 4C			    mov ah, 4Ch 
     157 007F  32 C0			    xor al, al 
     158 0081  CD 21			    int 21h 
     159 0083				MAIN ENDP 
     160				 
     161				; =====================================
					======== 
     162				;                PROCEDURES 
     163				; =====================================
					======== 
     164				 
     165 0083				check_screen_edges PROC 
     166 0083  60			    pusha 
     167				 
     168				    ; Predict next position 
     169 0084  A1 0034 R		    mov ax, ball_x 
     170 0087  03 06 0038 R		    add ax, ball_vx 
     171 008B  3D 0000			    cmp ax, 0 
     172 008E  7C 24			    jl bounce_x_edges 
     173 0090  8B D8			    mov bx, ax 
     174 0092  83 C3 06			    add bx, BALL_SIZE 
     175 0095  81 FB 0280		    cmp bx, SCREEN_WIDTH 
     176 0099  7F 19			    jg bounce_x_edges 
     177				 
     178 009B  A1 0036 R		    mov ax, ball_y 
     179 009E  03 06 003A R		    add ax, ball_vy 
     180 00A2  3D 0000			    cmp ax, 0 
     181 00A5  7C 13			    jl bounce_y_edges 
     182 00A7  8B D8			    mov bx, ax 
     183 00A9  83 C3 06			    add bx, BALL_SIZE 
     184 00AC  81 FB 01E0		    cmp bx, SCREEN_HEIGHT 
     185 00B0  7F 08			    jg bounce_y_edges 
     186				 
     187 00B2  61			    popa 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-5


     188 00B3  C3			    ret 
     189				 
     190 00B4				bounce_x_edges: 
     191 00B4  F7 1E 0038 R		    neg ball_vx 
     192 00B8  61			    popa 
     193 00B9  C3			    ret 
     194				 
     195 00BA				bounce_y_edges: 
     196 00BA  F7 1E 003A R		    neg ball_vy 
     197 00BE  61			    popa 
     198 00BF  C3			    ret 
     199 00C0				check_screen_edges ENDP 
     200				 
     201 00C0				check_paddle_collision PROC 
     202 00C0  60			    pusha 
     203				 
     204				    ; Predict next position 
     205 00C1  A1 0034 R		    mov ax, ball_x 
     206 00C4  03 06 0038 R		    add ax, ball_vx 
     207 00C8  8B D8			    mov bx, ax 
     208 00CA  A1 0036 R		    mov ax, ball_y 
     209 00CD  03 06 003A R		    add ax, ball_vy 
     210 00D1  8B C8			    mov cx, ax 
     211				 
     212				    ; Check vertical overlap 
     213 00D3  8B C1			    mov ax, cx 
     214 00D5  05 0006			    add ax, BALL_SIZE 
     215 00D8  3D 01C2			    cmp ax, PADDLE_Y 
     216 00DB  7C 1E			    jl skip_paddle 
     217 00DD  8B C1			    mov ax, cx 
     218 00DF  3D 01CC			    cmp ax, PADDLE_Y + PADDLE_HEIGHT 
     219 00E2  7F 17			    jg skip_paddle 
     220				 
     221				    ; Check horizontal overlap 
     222 00E4  8B C3			    mov ax, bx 
     223 00E6  05 0006			    add ax, BALL_SIZE 
     224 00E9  3B 06 0032 R		    cmp ax, paddle_x 
     225 00ED  7C 0C			    jl skip_paddle 
     226 00EF  8B C3			    mov ax, bx 
     227 00F1  3B 06 0082 R		    cmp ax, paddle_x + PADDLE_WIDTH 
     228 00F5  7F 04			    jg skip_paddle 
     229				 
     230				    ; Collision → bounce vertically 
     231 00F7  F7 1E 003A R		    neg ball_vy 
     232				 
     233 00FB				skip_paddle: 
     234 00FB  61			    popa 
     235 00FC  C3			    ret 
     236 00FD				check_paddle_collision ENDP 
     237				 
     238 00FD				check_brick_area_bounce PROC 
     239 00FD  60			    pusha 
     240				 
     241				    ; Predict next rectangle 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-6


     242 00FE  A1 0034 R		    mov ax, ball_x 
     243 0101  03 06 0038 R		    add ax, ball_vx 
     244 0105  8B D8			    mov bx, ax           ; next X 
     245 0107  8B D3			    mov dx, bx 
     246 0109  83 C2 06			    add dx, BALL_SIZE    ; right edge 
     247				 
     248 010C  A1 0036 R		    mov ax, ball_y 
     249 010F  03 06 003A R		    add ax, ball_vy 
     250 0113  8B C8			    mov cx, ax           ; next Y 
     251 0115  8B F1			    mov si, cx 
     252 0117  83 C6 06			    add si, BALL_SIZE    ; bottom edge 
     253				 
     254				    ; Check intersection with brick are
					a 0-550 × 0-125 
     255 011A  81 FB 0226		    cmp bx, 550 
     256 011E  77 2B			    ja skip_rect 
     257 0120  83 FA 00			    cmp dx, 0 
     258 0123  72 26			    jb skip_rect 
     259 0125  83 F9 7D			    cmp cx, 125 
     260 0128  77 21			    ja skip_rect 
     261 012A  83 FE 00			    cmp si, 0 
     262 012D  72 1C			    jb skip_rect 
     263				 
     264				    ; Bounce depending on side 
     265 012F  8B C3			    mov ax, bx 
     266 0131  3D 0000			    cmp ax, 0 
     267 0134  7C 17			    jl bounce_x 
     268 0136  8B C2			    mov ax, dx 
     269 0138  3D 0226			    cmp ax, 550 
     270 013B  7F 10			    jg bounce_x 
     271				 
     272 013D  8B C1			    mov ax, cx 
     273 013F  3D 0000			    cmp ax, 0 
     274 0142  7C 0F			    jl bounce_y 
     275 0144  8B C6			    mov ax, si 
     276 0146  3D 007D			    cmp ax, 125 
     277 0149  7F 08			    jg bounce_y 
     278				 
     279 014B				skip_rect: 
     280 014B  61			    popa 
     281 014C  C3			    ret 
     282				 
     283 014D				bounce_x: 
     284 014D  F7 1E 0038 R		    neg ball_vx 
     285 0151  61			    popa 
     286 0152  C3			    ret 
     287				 
     288 0153				bounce_y: 
     289 0153  F7 1E 003A R		    neg ball_vy 
     290 0157  61			    popa 
     291 0158  C3			    ret 
     292 0159				check_brick_area_bounce ENDP 
     293				 
     294 0159				move_ball PROC 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-7


     295 0159  60			    pusha 
     296				 
     297				    ; Erase old ball 
     298 015A  E8 01C3 R		    call clear_ball 
     299				 
     300				    ; Check collisions 
     301 015D  E8 0083 R		    call check_screen_edges 
     302 0160  E8 00C0 R		    call check_paddle_collision 
     303 0163  E8 00FD R		    call check_brick_area_bounce 
     304				 
     305				    ; Update position 
     306 0166  A1 0034 R		    mov ax, ball_x 
     307 0169  03 06 0038 R		    add ax, ball_vx 
     308 016D  A3 0034 R		    mov ball_x, ax 
     309 0170  A1 0036 R		    mov ax, ball_y 
     310 0173  03 06 003A R		    add ax, ball_vy 
     311 0177  A3 0036 R		    mov ball_y, ax 
     312				 
     313				    ; Draw new ball 
     314 017A  E8 017F R		    call draw_ball 
     315				 
     316 017D  61			    popa 
     317 017E  C3			    ret 
     318 017F				move_ball ENDP 
     319				 
     320				 
     321				 
     322				 
     323 017F				draw_ball PROC 
     324 017F  60			    pusha 
     325 0180  A1 0034 R		    mov ax, ball_x 
     326 0183  2E: A3 0000 E		    mov Rx, ax 
     327 0187  A1 0036 R		    mov ax, ball_y 
     328 018A  2E: A3 0000 E		    mov Ry, ax 
     329 018E  B8 0006			    mov ax, BALL_SIZE 
     330 0191  2E: A3 0000 E		    mov Rw, ax 
     331 0195  2E: A3 0000 E		    mov Rh, ax 
     332				 
     333				    ; --- Check if ball is within brick
					 area (0-550, 0-125) --- 
     334 0199  A1 0034 R		    mov ax, ball_x 
     335 019C  3D 0000			    cmp ax, 0 
     336 019F  7C 17			    jl not_in_bricks 
     337 01A1  3D 0226			    cmp ax, 550 
     338 01A4  7F 12			    jg not_in_bricks 
     339				 
     340 01A6  A1 0036 R		    mov ax, ball_y 
     341 01A9  3D 0000			    cmp ax, 0 
     342 01AC  7C 0A			    jl not_in_bricks 
     343 01AE  3D 007D			    cmp ax, 125 
     344 01B1  7F 05			    jg not_in_bricks 
     345				 
     346				    ; Ball is inside brick area 
     347 01B3  B0 0C			    mov al, 12      ; red 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-8


     348 01B5  EB 03 90			    jmp set_color 
     349				 
     350 01B8				not_in_bricks: 
     351 01B8  B0 0E			    mov al, BALL_COLOR 
     352				 
     353 01BA				set_color: 
     354 01BA  2E: A2 0000 E		    mov col, al 
     355 01BE  E8 0000 E		    call fillRect 
     356 01C1  61			    popa 
     357 01C2  C3			    ret 
     358 01C3				draw_ball ENDP 
     359				 
     360 01C3				clear_ball PROC 
     361 01C3  60			    pusha 
     362 01C4  A1 0034 R		    mov ax, ball_x 
     363 01C7  2E: A3 0000 E		    mov Rx, ax 
     364 01CB  A1 0036 R		    mov ax, ball_y 
     365 01CE  2E: A3 0000 E		    mov Ry, ax 
     366 01D2  B8 0006			    mov ax, BALL_SIZE 
     367 01D5  2E: A3 0000 E		    mov Rw, ax 
     368 01D9  2E: A3 0000 E		    mov Rh, ax 
     369 01DD  2E: C6 06 0000 E 00	    mov col, COLOR_BG 
     370 01E3  E8 0000 E		    call fillRect 
     371 01E6  61			    popa 
     372 01E7  C3			    ret 
     373 01E8				clear_ball ENDP 
     374				 
     375 01E8				render_bricks PROC 
     376 01E8  60			    pusha 
     377				 
     378 01E9  BB 0000 R		    mov bx, offset brick_map 
     379 01EC  33 FF			    xor di, di          ; ligne (di) 
     380				 
     381 01EE				loop_rows: 
     382 01EE  83 FF 05			    cmp di, BRICK_ROWS 
     383 01F1  7D 4C			    jge end_render 
     384				 
     385 01F3  33 F6			    xor si, si          ; colonne (si) 
     386				 
     387 01F5				loop_cols: 
     388 01F5  83 FE 0A			    cmp si, BRICK_COLS 
     389 01F8  7D 42			    jge next_row 
     390				 
     391				    ; Index = ligne * cols + col 
     392 01FA  8B C7			    mov ax, di 
     393 01FC  B9 000A			    mov cx, BRICK_COLS 
     394 01FF  F7 E1			    mul cx 
     395 0201  03 C6			    add ax, si 
     396				 
     397				    ; Verif brique a l'adresse brick_ma
					p + index 
     398 0203  53			    push bx 
     399 0204  BB 0000 R		    mov bx, offset brick_map 
     400 0207  03 D8			    add bx, ax 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-9


     401 0209  8A 07			    mov al, [bx]        ; AL = Couleur 
					de la brique (0 = vide) 
     402 020B  5B			    pop bx 
     403				 
     404 020C  3C 00			    cmp al, 0 
     405 020E  74 29			    je next_col        ; Si 0 (vide), o
					n passe 
     406				 
     407				    ; Calcul Pos X -> loc_x 
     408 0210  50			    push ax             ; Sauvegarde in
					dex 
     409 0211  B8 0032			    mov ax, BRICK_WIDTH 
     410 0214  05 0005			    add ax, BRICK_PADDING 
     411 0217  F7 E6			    mul si 
     412 0219  A3 003C R		    mov loc_x, ax 
     413 021C  58			    pop ax 
     414				 
     415				    ; Calcul Pos Y -> loc_y 
     416 021D  50			    push ax             ; Sauvegarde in
					dex 
     417 021E  B8 0014			    mov ax, BRICK_HEIGHT 
     418 0221  05 0005			    add ax, BRICK_PADDING 
     419 0224  F7 E7			    mul di 
     420 0226  A3 003E R		    mov loc_y, ax  
     421 0229  58			    pop ax 
     422				 
     423				    ; Recuperer la couleur 
     424 022A  53			    push bx 
     425 022B  BB 0000 R		    mov bx, offset brick_map 
     426 022E  03 D8			    add bx, ax 
     427 0230  8A 07			    mov al, [bx] 
     428 0232  A2 0040 R		    mov loc_col, al 
     429 0235  5B			    pop bx 
     430				 
     431				    ; Dessiner la brique 
     432 0236  E8 0241 R		    call draw_fancy_brick 
     433				 
     434 0239				next_col: 
     435 0239  46			    inc si 
     436 023A  EB B9			    jmp loop_cols 
     437				 
     438 023C				next_row: 
     439 023C  47			    inc di 
     440 023D  EB AF			    jmp loop_rows 
     441				 
     442 023F				end_render: 
     443 023F  61			    popa 
     444 0240  C3			    ret 
     445 0241				render_bricks ENDP 
     446				 
     447 0241				draw_fancy_brick PROC 
     448				    ; Utilise loc_x, loc_y, loc_col 
     449 0241  60			    pusha 
     450				 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-10


     451				    ; 1. Corps principal 
     452 0242  A1 003C R		    mov ax, loc_x 
     453 0245  2E: A3 0000 E		    mov Rx, ax 
     454 0249  A1 003E R		    mov ax, loc_y 
     455 024C  2E: A3 0000 E		    mov Ry, ax 
     456 0250  B8 0032			    mov ax, BRICK_WIDTH 
     457 0253  2E: A3 0000 E		    mov Rw, ax 
     458 0257  B8 0014			    mov ax, BRICK_HEIGHT 
     459 025A  2E: A3 0000 E		    mov Rh, ax 
     460 025E  A0 0040 R		    mov al, loc_col 
     461 0261  2E: A2 0000 E		    mov col, al 
     462 0265  E8 0000 E		    call fillRect 
     463				 
     464				    ; 2. Bordure haute/gauche (Blanc 15
					) 
     465 0268  2E: C6 06 0000 E 0F	    mov col, 15 
     466				 
     467				    ; Ligne haut 
     468 026E  B8 0032			    mov ax, BRICK_WIDTH 
     469 0271  2E: A3 0000 E		    mov Rw, ax 
     470 0275  2E: C7 06 0000 E 0002	    mov Rh, 2 
     471 027C  E8 0000 E		    call fillRect 
     472				 
     473				    ; Ligne gauche 
     474 027F  A1 003C R		    mov ax, loc_x 
     475 0282  2E: A3 0000 E		    mov Rx, ax 
     476 0286  A1 003E R		    mov ax, loc_y 
     477 0289  2E: A3 0000 E		    mov Ry, ax 
     478 028D  2E: C7 06 0000 E 0002	    mov Rw, 2 
     479 0294  B8 0014			    mov ax, BRICK_HEIGHT 
     480 0297  2E: A3 0000 E		    mov Rh, ax 
     481 029B  E8 0000 E		    call fillRect 
     482				 
     483				    ; 3. Bordure bas/droite (Gris fonce
					 8) 
     484 029E  2E: C6 06 0000 E 08	    mov col, 8 
     485				 
     486				    ; Ligne bas 
     487 02A4  A1 003C R		    mov ax, loc_x 
     488 02A7  2E: A3 0000 E		    mov Rx, ax 
     489 02AB  A1 003E R		    mov ax, loc_y 
     490 02AE  05 0014			    add ax, BRICK_HEIGHT 
     491 02B1  2D 0002			    sub ax, 2 
     492 02B4  2E: A3 0000 E		    mov Ry, ax 
     493 02B8  B8 0032			    mov ax, BRICK_WIDTH 
     494 02BB  2E: A3 0000 E		    mov Rw, ax 
     495 02BF  2E: C7 06 0000 E 0002	    mov Rh, 2 
     496 02C6  E8 0000 E		    call fillRect 
     497				 
     498				    ; Ligne droite 
     499 02C9  A1 003C R		    mov ax, loc_x 
     500 02CC  05 0032			    add ax, BRICK_WIDTH 
     501 02CF  2D 0002			    sub ax, 2 
     502 02D2  2E: A3 0000 E		    mov Rx, ax 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-11


     503 02D6  A1 003E R		    mov ax, loc_y 
     504 02D9  2E: A3 0000 E		    mov Ry, ax 
     505 02DD  2E: C7 06 0000 E 0002	    mov Rw, 2 
     506 02E4  B8 0014			    mov ax, BRICK_HEIGHT 
     507 02E7  2E: A3 0000 E		    mov Rh, ax 
     508 02EB  E8 0000 E		    call fillRect 
     509				 
     510 02EE  61			    popa 
     511 02EF  C3			    ret 
     512 02F0				draw_fancy_brick ENDP 
     513				 
     514 02F0				draw_paddle PROC 
     515 02F0  60			    pusha 
     516 02F1  A1 0032 R		    mov ax, paddle_x 
     517 02F4  2E: A3 0000 E		    mov Rx, ax 
     518 02F8  2E: C7 06 0000 E 01C2	    mov Ry, PADDLE_Y 
     519 02FF  B0 09			    mov al, PADDLE_COLOR 
     520 0301  2E: A2 0000 E		    mov col, al 
     521 0305  2E: C7 06 0000 E 0050	    mov Rw, PADDLE_WIDTH 
     522 030C  2E: C7 06 0000 E 000A	    mov Rh, PADDLE_HEIGHT 
     523 0313  E8 0000 E		    call fillRect 
     524 0316  61			    popa 
     525 0317  C3			    ret 
     526 0318				draw_paddle ENDP 
     527				 
     528 0318				clear_paddle PROC 
     529 0318  60			    pusha 
     530 0319  A1 0032 R		    mov ax, paddle_x 
     531 031C  2E: A3 0000 E		    mov Rx, ax 
     532 0320  2E: C7 06 0000 E 01C2	    mov Ry, PADDLE_Y 
     533 0327  B0 00			    mov al, COLOR_BG 
     534 0329  2E: A2 0000 E		    mov col, al 
     535 032D  2E: C7 06 0000 E 0050	    mov Rw, PADDLE_WIDTH 
     536 0334  2E: C7 06 0000 E 000A	    mov Rh, PADDLE_HEIGHT 
     537 033B  E8 0000 E		    call fillRect 
     538 033E  61			    popa 
     539 033F  C3			    ret 
     540 0340				clear_paddle ENDP 
     541				 
     542 0340				draw_ui PROC 
     543 0340  60			    pusha 
     544				    ; Positionner le curseur en bas a g
					auche 
     545 0341  B4 02			    mov ah, 02h 
     546 0343  B7 00			    mov bh, 00h 
     547 0345  B6 1D			    mov dh, 29      ; Ligne 29 
     548 0347  B2 01			    mov dl, 1       ; Colonne 1 
     549 0349  CD 10			    int 10h 
     550				 
     551				    ; On utilise l'interruption DOS dir
					ecte pour la string car CharLine de lib
					gfx fait un saut de ligne 
     552 034B  BA 0041 R		    mov dx, offset msg_quit 
     553 034E  B4 09			    mov ah, 09h 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Page     1-12


     554 0350  CD 21			    int 21h 
     555				 
     556 0352  61			    popa 
     557 0353  C3			    ret 
     558 0354				draw_ui ENDP 
     559				 
     560 0354				code ends 
     561				END MAIN 
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Symbols-1


Segments and Groups:

                N a m e         	Length	 Align	Combine Class

CODE . . . . . . . . . . . . . .  	0354	PARA	PUBLIC	
DONNEES  . . . . . . . . . . . .  	004E	PARA	PUBLIC	
PILE . . . . . . . . . . . . . .  	0200	PARA	STACK	

Symbols:            

                N a m e         	Type	 Value	 Attr

BALL_COLOR . . . . . . . . . . .  	NUMBER	000E	
BALL_SIZE  . . . . . . . . . . .  	NUMBER	0006	
BALL_VX  . . . . . . . . . . . .  	L WORD	0038	DONNEES
BALL_VY  . . . . . . . . . . . .  	L WORD	003A	DONNEES
BALL_X . . . . . . . . . . . . .  	L WORD	0034	DONNEES
BALL_Y . . . . . . . . . . . . .  	L WORD	0036	DONNEES
BOUNCE_X . . . . . . . . . . . .  	L NEAR	014D	CODE
BOUNCE_X_EDGES . . . . . . . . .  	L NEAR	00B4	CODE
BOUNCE_Y . . . . . . . . . . . .  	L NEAR	0153	CODE
BOUNCE_Y_EDGES . . . . . . . . .  	L NEAR	00BA	CODE
BRICK_COLS . . . . . . . . . . .  	NUMBER	000A	
BRICK_HEIGHT . . . . . . . . . .  	NUMBER	0014	
BRICK_MAP  . . . . . . . . . . .  	L BYTE	0000	DONNEES
BRICK_PADDING  . . . . . . . . .  	NUMBER	0005	
BRICK_ROWS . . . . . . . . . . .  	NUMBER	0005	
BRICK_WIDTH  . . . . . . . . . .  	NUMBER	0032	

CHARLINE . . . . . . . . . . . .  	L NEAR	0000	CODE	External
CHECK_BRICK_AREA_BOUNCE  . . . .  	N PROC	00FD	CODE	Length = 005C
CHECK_PADDLE_COLLISION . . . . .  	N PROC	00C0	CODE	Length = 003D
CHECK_SCREEN_EDGES . . . . . . .  	N PROC	0083	CODE	Length = 003D
CLEARSCREEN  . . . . . . . . . .  	L NEAR	0000	CODE	External
CLEAR_BALL . . . . . . . . . . .  	N PROC	01C3	CODE	Length = 0025
CLEAR_PADDLE . . . . . . . . . .  	N PROC	0318	CODE	Length = 0028
COL  . . . . . . . . . . . . . .  	V BYTE	0000	CODE	External
COLOR_BG . . . . . . . . . . . .  	NUMBER	0000	

DRAW_BALL  . . . . . . . . . . .  	N PROC	017F	CODE	Length = 0044
DRAW_FANCY_BRICK . . . . . . . .  	N PROC	0241	CODE	Length = 00AF
DRAW_PADDLE  . . . . . . . . . .  	N PROC	02F0	CODE	Length = 0028
DRAW_UI  . . . . . . . . . . . .  	N PROC	0340	CODE	Length = 0014

END_RENDER . . . . . . . . . . .  	L NEAR	023F	CODE
EXIT_GAME  . . . . . . . . . . .  	L NEAR	007A	CODE

FILLRECT . . . . . . . . . . . .  	L NEAR	0000	CODE	External

GAME_LOOP  . . . . . . . . . . .  	L NEAR	0014	CODE

LOC_COL  . . . . . . . . . . . .  	L BYTE	0040	DONNEES
LOC_X  . . . . . . . . . . . . .  	L WORD	003C	DONNEES
LOC_Y  . . . . . . . . . . . . .  	L WORD	003E	DONNEES
Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Symbols-2


LOOP_COLS  . . . . . . . . . . .  	L NEAR	01F5	CODE
LOOP_ROWS  . . . . . . . . . . .  	L NEAR	01EE	CODE

MAIN . . . . . . . . . . . . . .  	N PROC	0000	CODE	Length = 0083
MOVE_BALL  . . . . . . . . . . .  	N PROC	0159	CODE	Length = 0026
MOVE_LEFT  . . . . . . . . . . .  	L NEAR	0046	CODE
MOVE_RIGHT . . . . . . . . . . .  	L NEAR	005A	CODE
MSG_QUIT . . . . . . . . . . . .  	L BYTE	0041	DONNEES

NEXT_COL . . . . . . . . . . . .  	L NEAR	0239	CODE
NEXT_ROW . . . . . . . . . . . .  	L NEAR	023C	CODE
NOT_IN_BRICKS  . . . . . . . . .  	L NEAR	01B8	CODE

PADDLE_COLOR . . . . . . . . . .  	NUMBER	0009	
PADDLE_HEIGHT  . . . . . . . . .  	NUMBER	000A	
PADDLE_SPEED . . . . . . . . . .  	NUMBER	0014	
PADDLE_WIDTH . . . . . . . . . .  	NUMBER	0050	
PADDLE_X . . . . . . . . . . . .  	L WORD	0032	DONNEES
PADDLE_Y . . . . . . . . . . . .  	NUMBER	01C2	
PEEKKEY  . . . . . . . . . . . .  	L NEAR	0000	CODE	External

RENDER_BRICKS  . . . . . . . . .  	N PROC	01E8	CODE	Length = 0059
RH . . . . . . . . . . . . . . .  	V WORD	0000	CODE	External
RW . . . . . . . . . . . . . . .  	V WORD	0000	CODE	External
RX . . . . . . . . . . . . . . .  	V WORD	0000	CODE	External
RY . . . . . . . . . . . . . . .  	V WORD	0000	CODE	External

SCREEN_HEIGHT  . . . . . . . . .  	NUMBER	01E0	
SCREEN_WIDTH . . . . . . . . . .  	NUMBER	0280	
SET_COLOR  . . . . . . . . . . .  	L NEAR	01BA	CODE
SKIP_PADDLE  . . . . . . . . . .  	L NEAR	00FB	CODE
SKIP_RECT  . . . . . . . . . . .  	L NEAR	014B	CODE
SLEEP  . . . . . . . . . . . . .  	L NEAR	0000	CODE	External

TEMPO  . . . . . . . . . . . . .  	V WORD	0000	CODE	External
TEXT_COLOR . . . . . . . . . . .  	NUMBER	000F	

UPDATE_PADDLE_COMMON . . . . . .  	L NEAR	0072	CODE
UPDATE_PADDLE_L  . . . . . . . .  	L NEAR	0057	CODE
UPDATE_PADDLE_R  . . . . . . . .  	L NEAR	006F	CODE
USERINPUT  . . . . . . . . . . .  	V BYTE	0000	CODE	External

VIDEOCMD . . . . . . . . . . . .  	L NEAR	0000	CODE	External
VIDEOVGA . . . . . . . . . . . .  	L NEAR	0000	CODE	External

@FILENAME  . . . . . . . . . . .  	TEXT  SPACEBRK		

Microsoft (R) Macro Assembler Version 5.00                  12/16/25 25:04:10
                                                             Symbols-3



    552 Source  Lines
    552 Total   Lines
     77 Symbols

  50558 + 449602 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
